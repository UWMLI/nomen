// Generated by CoffeeScript 1.8.0
(function() {
  'use strict';
  var Archive;

  Archive = (function() {
    function Archive(json) {
      this.json = json;
    }

    Archive.prototype.scanLibrary = function(callback) {
      var processDirs;
      this.datasets = {};
      processDirs = (function(_this) {
        return function(urls) {
          if (urls.length === 0) {
            callback();
          } else {
            _this.addLibrary(resolveURI(_this.json, urls.pop()), function() {
              return processDirs(urls);
            });
          }
        };
      })(this);
      getJSONList(this.json, processDirs, callback);
    };

    Archive.prototype.addLibrary = function(url, callback) {
      var ds;
      ds = new Dataset(url);
      ds.loadInfo((function(_this) {
        return function() {
          _this.datasets[ds.id] = ds;
          callback();
        };
      })(this));
    };

    return Archive;

  })();

  window.Archive = Archive;

}).call(this);
